# USDT Rate Service (GRPC)

gRPC-—Å–µ—Ä–≤–∏—Å –Ω–∞ Go, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å USDT —Å –±–∏—Ä–∂–∏ Grinex –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ PostgreSQL.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ USDT (ask, bid)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫—É—Ä—Å–æ–≤ –≤ PostgreSQL
- Healthcheck
- Graceful shutdown
- Unit-—Ç–µ—Å—Ç—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` –∏ —Ñ–ª–∞–≥–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ zap
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π (Goose)
- Docker/Docker Compose
- Makefile-–∫–æ–º–∞–Ω–¥—ã

---

## üß∞ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go >= 1.22
- Docker + Docker Compose
- Make

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
GRPC_PORT=50051
GRINEX_URL=https://grinex.io/api/v2/depth
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=usdt_db
DB_HOST=postgres
DB_PORT=5432
```

## üß™ –ö–æ–º–∞–Ω–¥—ã Makefile

| –ö–æ–º–∞–Ω–¥–∞             | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|---------------------|-----------------------------------|
| `make build`        | –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                 |
| `make run`          | –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è      |
| `make docker-build` | –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞              |
| `make migrate-up`   | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (goose)       |
| `make migrate-down` | –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π                    |
| `make lint`         | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º (golangci-lint) |
| `make test`         | –ü—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç–æ–≤                     |


---

## üê≥ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (—á–µ—Ä–µ–∑ Docker)

```bash
git clone https://github.com/iskanarynbaev/usdt-rate-service.git
cd usdt-rate-service

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
make build
docker-compose up -d
make migrate-up

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose run --rm app ./app
